{"version":3,"sources":["pages/Learn/index.module.css","App.module.css","components/Navigation/index.module.css","components/Button/index.module.css","assets/images/baseball.jpg","assets/videos/BASEBALL.mp4","pages/Leaderboard/index.module.css","logo.svg","assets/images/danceoff.png","components/Navigation/Buttons.module.css","components/Posenet/index.module.css","components/Navigation/Buttons.js","components/Navigation/index.js","components/Button/index.js","pages/Intro/index.js","assets/svg/loop.svg","pages/Learn/index.js","components/Posenet/helpers/utils.js","components/Posenet/helpers/cosineSimilarity.js","components/Posenet/helpers/scorer.js","components/Posenet/Posenet.js","components/Posenet/index.js","pages/Record/index.js","lib/firebase.js","components/Rankings/index.js","lib/constants.js","components/PostRanking/index.js","pages/Leaderboard/index.js","App.js","serviceWorker.js","index.js","pages/Intro/index.module.css","components/PostRanking/index.module.css","components/Rankings/index.module.css","pages/Record/index.module.css"],"names":["module","exports","page","video","videoControls","buttons","seekBar","seekBtn","btn","dummy","playPause","loop","loopIcon","activeLoop","app","nav","bigBtn","default","intro","__webpack_require__","p","modeButtons","toggleButton","toggleButtonRight","btnContainer","toggles","btnLeft","btnRight","hasRecording","hasRecordingMain","hasRecordingSecondary","loading","posenet","download","button","contextualOptions","contextualOptionsDiv","replayDiv","scrubberDiv","scrubberInnerDiv","scores","s","score","totalScore","ModeButtons","_ref","_ref$recordings","recordings","_ref$onToggle","onToggle","v","console","log","length","react_default","a","createElement","className","styles","onClick","style","padding","Page","props","useEffect","Buttons_ModeButtons","Buttons","Button","children","_ref$theme","theme","rest","Object","objectWithoutProperties","assign","heroTitle","heroText","hero","src","baseball","alt","components_Button","startBtn","_extends","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","loop_ref2","d","loop_SvgLoop","svgRef","id","x","y","viewBox","enableBackground","xmlSpace","width","height","ref","ForwardRef","forwardRef","_useState","useState","_useState2","slicedToArray","setLoop","_useState3","_useState4","play","setPlay","_useState5","_useState6","progress","setProgress","_useState7","_useState8","seekVal","setSeekVal","fraction","played","_useState9","_useState10","loaded","setLoaded","_useState11","_useState12","seek","setSeek","playerRef","useRef","current","seekTo","ReactPlayer_default","url","playing","onProgress","onReady","dist","onChange","e","direction","Direction","HORIZONTAL","value","_ref2","position","borderRadius","top","left","concat","marginTop","marginLeft","bottom","marginBottom","Pause","Play","isMobile","test","navigator","userAgent","drawKeypoints","keypoints","minConfidence","skeletonColor","ctx","scale","undefined","translate","forEach","keypoint","_keypoint$position","t_x","t_y","beginPath","arc","Math","PI","fillStyle","fill","toTranslatedTuple","drawSkeleton","color","lineWidth","_ref3","_ref4","_ref5","ay","ax","_ref6","by","bx","moveTo","lineTo","strokeStyle","stroke","drawSegment","magnitude","vec","squaredTotal","map","num","pow","reduce","b","sqrt","cosineSimilarity","vector1","vector2","vec1","vec2","Error","dotProduct","remap","low1","high1","low2","high2","vectorizePose","pose","arrayOut","resize","cleanup","_calculatePoseDomain","extent","calculatePoseDomain","xMin","xMax","yMin","yMax","len","slice","scoreSimilarity","currentPose","currentTimeFrame","comparisonPoseSet","compareNearestFrames","includeDistance","accuracyInDecimals","c_Pose","scoreFrames","frameNumber","poseSet","count","includeDist","index","split","round","leftHalf","Array","max","rightHalf","closestNIndices","toConsumableArray","sort","distance","abs","findClosestPoses","weightedSimilarity","vs_pose","comparisonPose","comparisonPoseConfidence","comparisonPoseDistance","comparisonPoseIndex","similarity","toFixed","highestScore","reverse","currentFrameScore","filter","normalized","highest","all","GHOST","poseRecords","PoseNetComponent","state","error_messages","stream","trace","frames","ghostIndex","scoreOpacity","time","stop","finalDims","camera","timeout","good_keypoints","previousDelta","lastScore","errorMessages","_this","getVideoRecords","tracePose","poses","record","setState","traceVideo","blob","getCanvas","elem","canvas","getVideo","stopCamera","cam","srcObject","getTracks","t","startCamera","setupCamera","_callee","e1","_this$props","videoWidth","videoHeight","regenerator_default","wrap","_context","prev","next","mediaDevices","getUserMedia","frontCamera","objectFit","abrupt","Promise","resolve","onloadedmetadata","detectPose","getContext","poseDetectionFrame","_this$props2","algorithm","imageScaleFactor","forceFlipHorizontal","outputStride","minPoseConfidence","maxPoseDetections","minPartConfidence","nmsRadius","showVideo","showPoints","showSkeleton","ghostColor","skeletonLineWidth","translateGhost","maxFPS","compete","net","flipped","poseDetectionFrameInner","asyncToGenerator","mark","_callee2","currentDelta","delta","maxDelta","millis","ind","g_keypoints","g_score","g_timestamp","timestamp_now","userPose","singlePose","REC","NOW","_context2","requestAnimationFrame","parseInt","t0","estimateSinglePose","sent","push","estimateMultiplePoses","clearRect","save","drawImage","restore","performance","now","timestamp","floor","endless","onEnd","recordVideo","toBlob","getPoseRecords","prevState","objectSpread","_x","mobileNetArchitecture","e2","prevProps","clearTimeout","setTimeout","_this2","_this3","loadingText","fontSize","opacity","posenetCanvasContainer","overflow","react_webcam_default","posenetCanvas","Component","defaultProps","window","innerWidth","innerHeight","Posenet","onScore","onRestart","restarting","setRestarting","setScore","phase","setPhase","dims","setDims","min","onTracePose","onTraceVideo","handleRecordEnd","type","modalStart","modalEnd","restart","config","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","reactConfig","firebase","apps","initializeApp","Rankings","rankings","setRankings","databaseRef","sortKey","limit","callback","database","orderByChild","limitToLast","on","snapshot","sortedVals","child","val","ReadSortedFromFirebase","Fragment","title","rankingOL","k","rankingLI","user","Submit","username","setUsername","userScore","setUserScore","posted","setPosted","form","formDiv","onSubmit","data","then","PushToFirebase","preventDefault","cta","input","placeholder","thanks","thankYou","components_Rankings","PostRanking","App","setPage","handleScore","handleRestart","Intro","Learn","Record","Leaderboard","Navigation","Boolean","location","hostname","match","require","ReactDOM","render","src_App_0","document","getElementById","serviceWorker","ready","registration","unregister","modal"],"mappings":"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","file":"static/js/main.8498cc97.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Learn_page__3EZKE Layout_page__3AEwV\",\"video\":\"Learn_video__2sdSS\",\"videoControls\":\"Learn_videoControls__2pAe2\",\"buttons\":\"Learn_buttons__2ncbD\",\"seekBar\":\"Learn_seekBar__BU6xs\",\"seekBtn\":\"Learn_seekBtn__1bftA\",\"btn\":\"Learn_btn__2lKpL\",\"dummy\":\"Learn_dummy__2jhKp Learn_btn__2lKpL\",\"playPause\":\"Learn_playPause__L6Q9A Learn_btn__2lKpL\",\"loop\":\"Learn_loop__R7rsF Learn_btn__2lKpL\",\"loopIcon\":\"Learn_loopIcon__1fX86\",\"activeLoop\":\"Learn_activeLoop__SSIod Learn_loopIcon__1fX86\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3VY0g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__wajNd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigBtn\":\"Button_bigBtn__2JwRJ\",\"default\":\"Button_default__18Fup Button_bigBtn__2JwRJ\",\"intro\":\"Button_intro__1kxON Button_bigBtn__2JwRJ\"};","module.exports = __webpack_public_path__ + \"static/media/baseball.caad1c74.jpg\";","module.exports = __webpack_public_path__ + \"static/media/BASEBALL.136b2dab.mp4\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Leaderboard_page__22xay Layout_page__3AEwV\"};","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","module.exports = __webpack_public_path__ + \"static/media/danceoff.8f298f1e.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modeButtons\":\"Buttons_modeButtons__2HNnR\",\"toggleButton\":\"Buttons_toggleButton__3kNmh\",\"toggleButtonRight\":\"Buttons_toggleButtonRight__2C7P- Buttons_toggleButton__3kNmh\",\"btnContainer\":\"Buttons_btnContainer__18RFq\",\"toggles\":\"Buttons_toggles__1TOAn\",\"btn\":\"Buttons_btn__33UXZ\",\"btnLeft\":\"Buttons_btnLeft__1oo4l Buttons_btn__33UXZ\",\"btnRight\":\"Buttons_btnRight__3yaS_ Buttons_btn__33UXZ\",\"hasRecording\":\"Buttons_hasRecording__GrAuA\",\"hasRecordingMain\":\"Buttons_hasRecordingMain__-UFBG Buttons_hasRecording__GrAuA\",\"hasRecordingSecondary\":\"Buttons_hasRecordingSecondary__84sWz Buttons_hasRecording__GrAuA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"Posenet_loading__zk9xm\",\"posenet\":\"Posenet_posenet__2HVBw\",\"download\":\"Posenet_download__UlZD3\",\"button\":\"Posenet_button__gtwpS\",\"contextualOptions\":\"Posenet_contextualOptions__2idSY\",\"contextualOptionsDiv\":\"Posenet_contextualOptionsDiv__1Y5Xa\",\"replayDiv\":\"Posenet_replayDiv__3a_WU\",\"scrubberDiv\":\"Posenet_scrubberDiv__2iI79\",\"scrubberInnerDiv\":\"Posenet_scrubberInnerDiv__u-HoF\",\"scores\":\"Posenet_scores__1uGS0\",\"s\":\"Posenet_s__1W1MI\",\"score\":\"Posenet_score__jromn Posenet_s__1W1MI\",\"totalScore\":\"Posenet_totalScore__2K4cr Posenet_s__1W1MI\"};","import React, { useEffect } from \"react\";\n\nimport styles from \"./Buttons.module.css\";\n// constants\nimport { COLORS } from \"../../lib/constants\";\n\nconst ModeButtons = ({\n  recordings = [],\n  onToggle = v => console.log(\"toggled! \" + v)\n}) => {\n  const hasRecording = recordings.length === 0;\n  return (\n    <div className={styles.modeButtons}>\n      <div className={styles.btnContainer}>\n        <button\n          className={\n            styles.btnLeft +\n            \" \" +\n            (hasRecording ? styles.hasRecordingSecondary : \"\")\n          }\n          onClick={() => onToggle(\"watch\")}\n          style={{\n            padding: \"8px 15px\"\n          }}\n        >\n          ‚ñ∂Ô∏è\n        </button>\n        <button\n          className={\n            styles.btn + \" \" + (!hasRecording ? styles.hasRecordingMain : \"\")\n          }\n          onClick={() => onToggle(\"record\")}\n          style={{\n            padding: \"8px 15px\"\n          }}\n        >\n          üìπ\n        </button>\n        <button\n          className={\n            styles.btnRight +\n            \" \" +\n            (!hasRecording ? styles.hasRecordingMain : \"\")\n          }\n          onClick={() => onToggle(\"compete\")}\n          style={{\n            padding: \"8px 15px\"\n          }}\n        >\n          ‚öîÔ∏è\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst Page = props => {\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this navigation page yo\");\n\n    return () => console.log(\"unmounted this navigation page yo\");\n  }, []);\n  return <ModeButtons {...props} />;\n};\n\nexport default Page;\n","import React from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport Buttons from \"./Buttons\";\n\nconst Page = ({ onClick }) => {\n  return (\n    <div className={styles.nav}>\n      <Buttons onToggle={onClick} />\n    </div>\n  );\n};\n\nexport default Page;\n","import React from \"react\";\n\nimport styles from \"./index.module.css\";\n\nconst Button = ({ children, onClick, theme = \"default\", ...rest }) => {\n  return (\n    <button className={styles[theme]} onClick={onClick} {...rest}>\n      {children || \"button\"}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { useEffect } from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport Button from \"../../components/Button\";\n\n// assets\nimport dance from \"../../assets/images/danceoff.png\";\nimport baseball from \"../../assets/images/baseball.jpg\";\n\nconst Page = ({ onClick }) => {\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this page yo\");\n\n    return () => console.log(\"unmounted this page yo\");\n  }, []);\n  return (\n    <div className={styles.page}>\n      <span className={styles.heroTitle}>Batterly</span>\n      <span className={styles.heroText}>be your baseball hero.</span>\n      <img className={styles.hero} src={baseball} alt=\"baseball!\" />\n      <Button className={styles.startBtn} theme=\"intro\" onClick={onClick}>\n        START\n      </Button>\n    </div>\n  );\n};\n\nexport default Page;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M256.5,286c76.683,0,142.5-64.228,142.5-142.5C399,64.9,335.1,0,256.5,0S113,64.9,113,143.5   c0,35.099,12.9,66.899,34.2,91.5c3.005-1.994,21.385-18.847,53.399-29.7C183.8,190,173,168.1,173,143.5   c0-45.601,37.899-82.5,83.5-82.5S339,97.899,339,143.5c0,44.65-35.839,82.5-82.5,82.5C181.597,226,113,288.457,113,368.5   c0,78.6,64.9,143.5,143.5,143.5S399,447.1,399,368.5c0-35.101-12.9-66.901-34.2-91.5c-3.005,1.994-21.385,18.845-53.399,29.7   C328.2,322,339,343.9,339,368.5c0,45.599-36.899,83.5-82.5,83.5S173,414.099,173,368.5C173,323.85,209.839,286,256.5,286z\"\n}));\n\nvar SvgLoop = function SvgLoop(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    width: 512,\n    height: 512,\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLoop, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/loop.21dce757.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState, useRef } from \"react\";\nimport ReactPlayer from \"react-player\";\nimport { Direction, Slider, PlayerIcon } from \"react-player-controls\";\n\nimport styles from \"./index.module.css\";\n\nimport { ReactComponent as LoopIcon } from \"../../assets/svg/loop.svg\";\nimport video from \"../../assets/videos/BASEBALL.mp4\";\n\nconst Page = () => {\n  const [loop, setLoop] = useState(true);\n  const [play, setPlay] = useState(true);\n  useEffect(() => {\n    setPlay(true);\n    return () => setPlay(false);\n  }, []);\n\n  // update slider progress\n  const [progress, setProgress] = useState();\n  const [seekVal, setSeekVal] = useState(0);\n  useEffect(() => {\n    if (progress) {\n      // there's more stuff\n      const fraction = progress.played;\n      setSeekVal(fraction);\n    }\n  }, [progress]);\n\n  // seek slider\n  const [loaded, setLoaded] = useState(false);\n  const [seek, setSeek] = useState(0);\n  const playerRef = useRef();\n  useEffect(() => {\n    if (loaded && playerRef) {\n      playerRef.current.seekTo(seek);\n      setSeekVal(seek);\n    }\n  }, [seek]);\n  const scrubVideo = e => {\n    setSeek(e);\n  };\n\n  // style slider and slider handle\n  const SliderBar = ({ direction, value, style, className }) => (\n    <div className={className} style={style} />\n  );\n  const SliderHandle = ({ direction, value, style, className }) => (\n    <div\n      className={className}\n      style={Object.assign(\n        {},\n        {\n          position: \"absolute\",\n          width: 16,\n          height: 16,\n          borderRadius: \"100%\"\n        },\n        direction === Direction.HORIZONTAL\n          ? {\n              top: 0,\n              left: `${value * 100}%`,\n              marginTop: -5,\n              marginLeft: -8\n            }\n          : {\n              left: 0,\n              bottom: `${value * 100}%`,\n              marginBottom: -8,\n              marginLeft: -4\n            },\n        style\n      )}\n    />\n  );\n\n  return (\n    <div className={styles.page}>\n      <ReactPlayer\n        ref={playerRef}\n        height=\"100%\"\n        url={video}\n        playing={play}\n        loop={loop}\n        onProgress={setProgress}\n        onReady={() => setLoaded(true)}\n      />\n      <div className={styles.videoControls}>\n        {/* <div className={styles.seekBar}>\n          <button className={styles.seekBtn} />{\" \"}\n        </div> */}\n        <Slider onChange={scrubVideo} direction={Direction.HORIZONTAL}>\n          <SliderBar\n            className={styles.seekBar}\n            value={seekVal}\n            direction={Direction.HORIZONTAL}\n          />\n          <SliderHandle\n            className={styles.seekBtn}\n            value={seekVal}\n            direction={Direction.HORIZONTAL}\n          />\n        </Slider>\n\n        <div className={styles.buttons}>\n          <p className={styles.dummy} />\n          <button className={styles.playPause} onClick={() => setPlay(!play)}>\n            {play ? (\n              <PlayerIcon.Pause height={20} />\n            ) : (\n              <PlayerIcon.Play height={20} />\n            )}\n          </button>\n          <button className={styles.loop} onClick={() => setLoop(!loop)}>\n            <LoopIcon className={loop ? styles.activeLoop : styles.loopIcon} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Page;\n","import * as posenet from \"@tensorflow-models/posenet\";\n\nexport const isAndroid = () => /Android/i.test(navigator.userAgent);\n\nexport const isiOS = () => /iPhone|iPad|iPod/i.test(navigator.userAgent);\n\nexport const isMobile = () => isAndroid() || isiOS();\n\nexport const drawKeypoints = (\n  keypoints,\n  minConfidence,\n  skeletonColor,\n  ctx,\n  scale = 1,\n  translate = { x: 0, y: 0 }\n) => {\n  keypoints.forEach(keypoint => {\n    if (keypoint.score >= minConfidence) {\n      const { y, x } = keypoint.position;\n      const t_x = x + translate.x;\n      const t_y = y + translate.y;\n      ctx.beginPath();\n      ctx.arc(t_x * scale, t_y * scale, 3, 0, 2 * Math.PI);\n      ctx.fillStyle = skeletonColor;\n      ctx.fill();\n    }\n  });\n};\n\nconst toTuple = ({ y, x }) => [y, x];\n\nconst toTranslatedTuple = ({ y, x }, translate) => [\n  y + translate.y,\n  x + translate.x\n];\n\nconst drawSegment = ([ay, ax], [by, bx], color, lineWidth, scale, ctx) => {\n  ctx.beginPath();\n  ctx.moveTo(ax * scale, ay * scale);\n  ctx.lineTo(bx * scale, by * scale);\n  ctx.lineWidth = lineWidth;\n  ctx.strokeStyle = color;\n  ctx.stroke();\n};\n\nexport const drawSkeleton = (\n  keypoints,\n  minConfidence,\n  color,\n  lineWidth,\n  ctx,\n  scale = 1,\n  translate = { x: 0, y: 0 }\n) => {\n  const adjacentKeyPoints = posenet.getAdjacentKeyPoints(\n    keypoints,\n    minConfidence\n  );\n\n  adjacentKeyPoints.forEach(keypoints => {\n    drawSegment(\n      toTranslatedTuple(keypoints[0].position, translate),\n      toTranslatedTuple(keypoints[1].position, translate),\n      color,\n      lineWidth,\n      scale,\n      ctx\n    );\n  });\n};\n\n// draw3dModel\n// exact same thing\n","export const magnitude = vec => {\n  const squaredTotal = vec.map(num => Math.pow(num, 2)).reduce((a, b) => a + b); // sum of squares\n  const mag = Math.sqrt(squaredTotal); // squared root\n  return mag;\n};\n\nexport const dotProduct = (vec1, vec2) => {\n  if (vec1.length !== vec2.length) {\n    throw new Error(\n      \"vector lengths are not similar. please make sure vector 1 and vector 2 have the same length.\"\n    );\n  }\n  const sumOfMultiplications = vec1\n    .map((vec, i) => vec * vec2[i]) // multiply each scalar in the vector\n    .reduce((a, b) => a + b); // sum\n  return sumOfMultiplications;\n};\n\nexport const cosineSimilarity = (vector1, vector2) => {\n  const sim =\n    dotProduct(vector1, vector2) / (magnitude(vector1) * magnitude(vector2));\n  return sim;\n};\n","import { extent } from \"d3-array\";\nimport { cosineSimilarity } from \"./cosineSimilarity\";\n\nconst SCORE_MIN = 0.8;\n\nfunction remap(value, low1, high1, low2, high2) {\n  return low2 + ((high2 - low2) * (value - low1)) / (high1 - low1);\n}\n\n// find bounding box of pose\nconst calculatePoseDomain = pose => {\n  const keypoints = pose.keypoints;\n  const x = keypoints.map(v => v.position.x);\n  const y = keypoints.map(v => v.position.y);\n\n  const xDomain = extent(x);\n  const yDomain = extent(y);\n\n  return { x: xDomain, y: yDomain };\n};\n\n// return an array of poses with current pose in the middle of array\n// frameNumber == which point in time (of the poseSet) do you want to compare?\nconst findClosestPoses = (\n  frameNumber,\n  poseSet,\n  count = 5,\n  includeDist = false\n) => {\n  const index = frameNumber;\n  // find n closest poses compared to input pose and its index\n  const split = Math.round(count / 2);\n  // the first item in leftHalf is the current index\n  const leftHalf = Array(split)\n    .fill(split)\n    .map((v, i) => Math.max(index - i, 0));\n\n  const rightHalf = Array(count - split)\n    .fill(count - split)\n    .map((v, i) => index + 1 + i);\n\n  const closestNIndices = [...leftHalf, ...rightHalf].sort((a, b) => a - b);\n\n  if (includeDist) {\n    return closestNIndices.map((v, i) => {\n      return {\n        distance: Math.abs(index - v),\n        index: v,\n        pose: poseSet[v]\n      };\n    });\n  } else {\n    return closestNIndices.map(v => poseSet[v]);\n  }\n};\n\n// convert pose into vector,\n// option to resize to 0-1 for scoring\n// option to ensure vector is length 34 (for tfjs posenet)\nconst vectorizePose = (pose, resize = true, cleanup = true) => {\n  let arrayOut;\n\n  if (!pose || pose.length === 0) return [];\n\n  // maintain pose order\n  const keypoints = pose.keypoints;\n  // const keypoints = pose.keypoints.sort((a, b) => {\n  //   const x = a.part;\n  //   const y = b.part;\n\n  //   if (x < y) return -1;\n  //   if (x > y) return 1;\n  //   return 0;\n  // });\n\n  // resize == remap x and y to 0 to 1\n  if (resize) {\n    const { x, y } = calculatePoseDomain(pose);\n    const xMin = x[0];\n    const xMax = x[1];\n    const yMin = y[0];\n    const yMax = y[1];\n\n    //todo test this\n    arrayOut = [].concat.apply(\n      [],\n      keypoints.map(v => [\n        remap(v.position.y, yMin, yMax, 0, 1),\n        remap(v.position.x, xMin, xMax, 0, 1)\n      ])\n    );\n  } else {\n    arrayOut = [].concat.apply(\n      [],\n      keypoints.map(v => [v.position.y, v.position.x])\n    );\n  }\n\n  // ensure length === 34\n  if (cleanup) {\n    const len = arrayOut.length;\n    if (len !== 34) {\n      if (len < 34) {\n        console.log(`current keypoint count is ${len}. should be 34.`);\n      }\n      arrayOut = arrayOut.slice(0, 34);\n    }\n  }\n\n  return arrayOut;\n};\n\nconst scoreSimilarity = (\n  currentPose,\n  currentTimeFrame,\n  comparisonPoseSet,\n  compareNearestFrames = 5,\n  includeDistance = true,\n  accuracyInDecimals = 4\n) => {\n  const PENALTY = 0.001;\n  const c_Pose = vectorizePose(currentPose, true, true);\n\n  // score nearest n poses with current pose\n  const scoreFrames = findClosestPoses(\n    currentTimeFrame,\n    comparisonPoseSet,\n    compareNearestFrames,\n    includeDistance\n  ).map((v, i) => {\n    if (!v.pose) {\n      return {\n        distance: 1,\n        score: 0,\n        cosineSimilarity: 0,\n        weightedSimilarity: 0,\n        index: v.index\n      };\n    }\n\n    const vs_pose = v.pose.pose[0];\n\n    const comparisonPose = vectorizePose(vs_pose, true, true);\n    const comparisonPoseConfidence = vs_pose.score;\n    const comparisonPoseDistance = v.distance;\n    const comparisonPoseIndex = v.index;\n\n    // cosine similarity\n    const similarity = cosineSimilarity(c_Pose, comparisonPose).toFixed(\n      accuracyInDecimals\n    );\n    // penalize by accuracy/confidence\n    const weightedSimilarity = comparisonPoseConfidence * similarity;\n    // also penalize by how many frame did you lag behind\n    const finalSimilarity =\n      weightedSimilarity - comparisonPoseDistance * PENALTY;\n\n    return {\n      distance: comparisonPoseDistance,\n      score: finalSimilarity,\n      cosineSimilarity: similarity,\n      weightedSimilarity: weightedSimilarity,\n      index: comparisonPoseIndex\n    };\n  });\n\n  const highestScore = scoreFrames\n    .map(v => v.score)\n    .sort((a, b) => a - b)\n    .reverse()[0];\n  const currentFrameScore = scoreFrames.filter(v => v.distance === 0)[0].score;\n\n  return {\n    score: {\n      normalized: Math.max(remap(highestScore, SCORE_MIN, 1.0, 0, 100), 0),\n      highest: highestScore,\n      current: currentFrameScore,\n      all: scoreFrames\n    }\n  };\n};\n\nexport default scoreSimilarity;\n","// ref: https://github.com/jscriptcoder/tfjs-posenet/blob/master/src/PoseNet/index.jsx\n\n// main imports\nimport React, { Component } from \"react\";\nimport * as posenet from \"@tensorflow-models/posenet\";\n\nimport Webcam from \"react-webcam\";\n\n// styles\nimport styles from \"./index.module.css\";\n\n// components\nimport { isMobile, drawKeypoints, drawSkeleton } from \"./helpers/utils\";\nimport scoreSimilarity from \"./helpers/scorer\";\n\n// ghost (the dance move you're competing with)\nimport RECORD from \"./data/BASEBALL.json\";\nconst GHOST = RECORD.poseRecords;\n\nexport default class PoseNetComponent extends Component {\n  static defaultProps = {\n    videoWidth: window.innerWidth,\n    videoHeight: window.innerHeight,\n    algorithm: \"single-pose\",\n    mobileNetArchitecture: isMobile() ? 0.5 : 1.01,\n    showVideo: true,\n    showSkeleton: true,\n    showPoints: true,\n    minPoseConfidence: 0.1,\n    minPartConfidence: 0.1,\n    maxPoseDetections: 2,\n    nmsRadius: 20.0,\n    outputStride: 16,\n    imageScaleFactor: 0.3,\n    skeletonColor: \"aqua\",\n    ghostColor: \"yellow\",\n    skeletonLineWidth: 8,\n    loadingText: \"Loading pose detector...\",\n    frontCamera: true,\n    stop: false,\n    record: false,\n    recordVideo: false,\n    maxFPS: 30,\n    compete: true,\n    endless: false\n  };\n\n  state = {\n    loading: true,\n    error_messages: \"\",\n    stream: null,\n    trace: [],\n    frames: [],\n    ghostIndex: 0,\n    score: 0,\n    totalScore: 0,\n    scoreOpacity: 0,\n    time: 0,\n    stop: false,\n    finalDims: { height: 0, width: 0 }\n  };\n  camera = undefined;\n  timeout = undefined;\n  good_keypoints = {};\n  previousDelta = 0;\n  lastScore = 0;\n\n  errorMessages = () => {\n    // pipe out error messages\n    if (this.props.errorMessages) {\n      this.props.errorMessages(this.state.error_messages);\n    }\n  };\n\n  // the traced sequence\n  getPoseRecords() {\n    if (this.props.getPoseRecords) {\n      this.props.getPoseRecords(this.state.trace);\n    }\n  }\n\n  getVideoRecords = () => {\n    if (this.props.getVideoRecords) {\n      this.props.getVideoRecords(this.state.frames);\n    }\n  };\n\n  tracePose = poses => {\n    if (this.props.record) {\n      this.setState({ trace: [...this.state.trace, poses] });\n    }\n  };\n\n  traceVideo = blob => {\n    if (this.props.record) {\n      this.setState({ frames: [...this.state.frames, blob] });\n    }\n  };\n\n  getCanvas = elem => {\n    this.canvas = elem;\n  };\n\n  getVideo = elem => {\n    try {\n      this.video = elem.video; // react-webcam\n    } catch (e) {\n      this.video = elem; // html5 video tag\n    }\n  };\n\n  stopCamera = () => {\n    const cam = this.camera;\n    if (cam) {\n      const stream = cam.srcObject;\n      const tracks = stream.getTracks();\n\n      // stop all tracks\n      tracks.map(t => t.stop());\n      this.camera = undefined;\n      this.setState({ loading: true, stop: true });\n    }\n  };\n\n  startCamera = () => {\n    const cam = this.camera;\n    if (cam) {\n      this.setState({ loading: false, stop: false });\n    } else {\n      this.stopCamera();\n    }\n  };\n\n  setupCamera = async () => {\n    // MDN: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      const e1 =\n        \"Browser API navigator.mediaDevices.getUserMedia not available\";\n      this.setState({ error_messages: e1 });\n      throw e1;\n    }\n\n    const { videoWidth, videoHeight } = this.props;\n    const video = this.video;\n    const mobile = isMobile();\n    const frontCamera = this.props.frontCamera;\n\n    video.width = videoWidth;\n    video.height = videoHeight;\n    video.style.objectFit = \"contain\";\n\n    // MDN: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    // const stream = await navigator.mediaDevices.getUserMedia({\n    //   audio: false,\n    //   video: {\n    //     facingMode: frontCamera ? \"user\" : { exact: \"environment\" },\n    //     // width: videoWidth,\n    //     // height: videoHeight\n    //     width: mobile ? void 0 : videoWidth,\n    //     height: mobile ? void 0 : videoHeight\n    //   }\n    // });\n\n    // video.srcObject = stream;\n\n    return new Promise(resolve => {\n      video.onloadedmetadata = () => {\n        // Once the video metadata is ready, we can start streaming video\n        video.play();\n\n        const finalDims = {\n          height: video.videoHeight, // actual video running\n          width: video.videoWidth\n        };\n\n        video.width = video.videoWidth;\n        video.height = video.videoHeight;\n\n        this.setState({ finalDims });\n        resolve(video); // promise returns video\n      };\n    });\n  };\n\n  detectPose = () => {\n    //const { videoWidth, videoHeight } = this.props;\n    const videoWidth = this.state.finalDims.width;\n    const videoHeight = this.state.finalDims.height;\n\n    const canvas = this.canvas;\n    const ctx = canvas.getContext(\"2d\");\n\n    canvas.width = videoWidth;\n    canvas.height = videoHeight;\n\n    this.poseDetectionFrame(ctx);\n  };\n\n  poseDetectionFrame = ctx => {\n    const {\n      algorithm,\n      imageScaleFactor,\n      forceFlipHorizontal,\n      outputStride,\n      minPoseConfidence,\n      maxPoseDetections,\n      minPartConfidence,\n      nmsRadius,\n      //videoWidth,\n      //videoHeight,\n      showVideo,\n      showPoints,\n      showSkeleton,\n      skeletonColor,\n      ghostColor,\n      translateGhost,\n      skeletonLineWidth,\n      frontCamera,\n      stop,\n      maxFPS,\n      compete\n    } = this.props;\n\n    const { finalDims } = this.state;\n\n    const videoHeight = finalDims.height;\n    const videoWidth = finalDims.width;\n\n    const net = this.net;\n    const video = this.video;\n\n    const flipped = forceFlipHorizontal\n      ? forceFlipHorizontal\n      : frontCamera\n      ? true\n      : false;\n\n    const poseDetectionFrameInner = async currentDelta => {\n      // stops running if complete\n      if (this.props.stop || this.state.stop || !this.camera) {\n        return;\n      }\n      // this is to cap fps\n      //requestAnimationFrame(poseDetectionFrameInner);\n      requestAnimationFrame(poseDetectionFrameInner);\n      const delta = parseInt(currentDelta - this.previousDelta);\n      const maxDelta = parseInt(1000 / maxFPS);\n\n      // another way to count fps\n      // see how many repeats of each second shows up on the console\n      //console.log(parseInt(performance.now() / 1000));\n\n      // ^ above == \"how long did it take to get here since the last frame in ms?\"\n      if (maxFPS && delta < maxDelta) {\n        // 1000 / fps == frames per millisecond\n        console.log(\"capped!\", delta);\n\n        return;\n      }\n\n      // pose calculation starts here\n      let poses = [];\n\n      switch (algorithm) {\n        case \"single-pose\":\n          const pose = await net.estimateSinglePose(\n            video,\n            imageScaleFactor,\n            flipped,\n            outputStride\n          );\n\n          poses.push(pose);\n          break;\n\n        case \"multi-pose\":\n          poses = await net.estimateMultiplePoses(\n            video,\n            imageScaleFactor,\n            flipped,\n            outputStride,\n            maxPoseDetections,\n            minPartConfidence,\n            nmsRadius\n          );\n\n          break;\n      }\n\n      // CLEAR SCREEN\n      // ------------\n      ctx.clearRect(0, 0, videoWidth, videoHeight);\n\n      // SHOW VIDEO FRAME\n      // ----------------\n      if (showVideo) {\n        ctx.save();\n        if (flipped) {\n          // https://christianheilmann.com/2013/07/19/flipping-the-image-when-accessing-the-laptop-camera-with-getusermedia/\n          ctx.scale(-1, 1);\n          ctx.translate(-videoWidth, 0);\n        }\n        ctx.drawImage(video, 0, 0, videoWidth, videoHeight);\n        ctx.restore();\n      }\n\n      // DRAW CURRENT PREDICTION\n      // -----------------------\n      // For each pose (i.e. person) detected in an image, loop through the poses\n      // and draw the resulting skeleton and keypoints if over certain confidence\n      // scores\n      poses.forEach(({ score, keypoints }) => {\n        if (score >= minPoseConfidence) {\n          if (showPoints) {\n            drawKeypoints(keypoints, minPartConfidence, skeletonColor, ctx);\n          }\n          if (showSkeleton) {\n            drawSkeleton(\n              keypoints,\n              minPartConfidence,\n              skeletonColor,\n              skeletonLineWidth,\n              ctx\n            );\n          }\n        }\n      });\n\n      // DRAW GHOST DANCER\n      // -----------------\n      if (compete) {\n        // if compete is triggered, start timer\n        // trigger is the same as record\n        if (this.state.time === 0) {\n          this.setState({ time: performance.now() });\n        }\n\n        if (!GHOST[this.state.ghostIndex]) {\n          // end of loop\n          console.log(\"RESET!!!!\");\n          const millis = performance.now() - this.state.time;\n          console.log(\"seconds elapsed = \" + Math.floor(millis / 1000));\n\n          // for now, repeat loop\n          if (this.props.endless) {\n            // ENDLESS MODE FTW\n            this.setState({\n              ghostIndex: 0,\n              time: performance.now(),\n              totalScore: 0\n            });\n          } else {\n            this.stopCamera();\n            if (this.props.onEnd) {\n              this.props.onEnd(this.state.totalScore);\n            }\n            this.setState({\n              totalScore: 0,\n              time: performance.now(),\n              stop: true\n            });\n          }\n        } else {\n          const ind = this.state.ghostIndex;\n          const g_keypoints = GHOST[ind].pose[0].keypoints;\n          const g_score = GHOST[ind].pose[0].score;\n\n          const g_timestamp = GHOST[ind].timestamp;\n          const timestamp_now = (performance.now() - this.state.time) / 1000;\n\n          console.log(`REC: ${g_timestamp} NOW: ${timestamp_now}`);\n\n          if (g_score >= minPoseConfidence) {\n            // only update keypoints when it passes the confidence threshold\n            this.good_keypoints = g_keypoints;\n          }\n          // else use the previous one\n          if (showPoints) {\n            drawKeypoints(\n              this.good_keypoints,\n              minPartConfidence,\n              ghostColor,\n              ctx\n            );\n          }\n          if (showSkeleton) {\n            drawSkeleton(\n              this.good_keypoints,\n              minPartConfidence,\n              ghostColor,\n              skeletonLineWidth,\n              ctx\n            );\n          }\n\n          // SCORE USER AGAINST GHOST\n          const userPose = poses[0];\n          const similarity = scoreSimilarity(\n            userPose,\n            this.state.ghostIndex, // TODO: change this to g_timestamp\n            GHOST\n          );\n\n          console.log(similarity.score.highest);\n\n          const score = parseInt(similarity.score.normalized.toFixed(2));\n          this.setState(prev => ({\n            score: score,\n            totalScore: prev.totalScore + score\n          }));\n        }\n      }\n\n      // SHOW OUTPUT\n      // -----------\n      if (stop || this.state.stop || !this.camera) {\n        console.log(\"complete!\");\n        // clear canvas\n        ctx.clearRect(0, 0, videoWidth, videoHeight);\n      } else {\n        const singlePose = poses.slice(0, 1);\n        // to prevent multipose from screwing data\n        // it only keeps the highest\n        // TODO: allow multi pose recordings\n\n        if (this.props.record) {\n          // if record is triggered, start timer\n          if (this.state.time === 0) {\n            this.setState({ time: performance.now() });\n          }\n\n          if (this.props.recordVideo) {\n            //console.log(\"recording frame and video!\");\n          } else {\n            //console.log(\"recording frames!\");\n          }\n          // trace with timestamp\n          // https://stackoverflow.com/questions/8279729/calculate-fps-in-canvas-using-requestanimationframe\n          this.tracePose({\n            pose: singlePose,\n            timestamp: (performance.now() - this.state.time) / 1000\n          });\n          // record video\n          this.canvas.toBlob(this.traceVideo, \"image/jpeg\", 0.4);\n\n          // stream poses to parent\n          this.getPoseRecords();\n          this.getVideoRecords();\n        } else if (!this.props.record && this.state.time !== 0) {\n          this.setState({ time: 0 });\n        }\n\n        // call next recursion\n        // ONLY IF THE TIMESTAMP OF RECORD IS SLOWER THAN CURRENT TIMESTAMP\n        const REC = GHOST[this.state.ghostIndex].timestamp.toFixed(5);\n        const NOW = ((performance.now() - this.state.time) / 1000).toFixed(5);\n\n        if (REC < NOW) {\n          this.setState(prevState => ({\n            ...prevState,\n            ghostIndex: prevState.ghostIndex + 1\n          }));\n        }\n\n        this.previousDelta = currentDelta;\n      }\n    };\n\n    poseDetectionFrameInner();\n  };\n\n  async componentDidMount() {\n    this.net = await posenet.load(this.props.mobileNetArchitecture);\n    //console.log(\"loaded mobilenet\");\n    //console.log(this.net);\n\n    try {\n      this.camera = await this.setupCamera();\n    } catch (e) {\n      const e2 =\n        \"This browser does not support video capture, or this device does not have a camera\";\n      this.setState({ error_messages: e2 });\n      throw e2;\n    } finally {\n      this.setState({ loading: false });\n    }\n\n    this.detectPose();\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    if (prevProps !== this.props) {\n      if (prevProps.frontCamera !== this.props.frontCamera) {\n        // stop existing camera\n        this.stopCamera();\n        // setup and start\n        this.camera = await this.setupCamera();\n        this.startCamera();\n        // detect pose\n        this.detectPose();\n      }\n    }\n\n    if (prevState !== this.state) {\n      if (prevState.score !== this.state.score && this.state.score !== 0) {\n        if (this.timeout) clearTimeout(this.timeout);\n        this.setState({ scoreOpacity: 1 });\n        this.timeout = setTimeout(\n          () => this.setState({ scoreOpacity: 0 }),\n          3000\n        );\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    console.log(\"component will unmounts!\");\n    this.stopCamera();\n    this.setState({ stop: true });\n  }\n\n  render() {\n    const loading = this.state.loading ? (\n      <div className={styles.loading}>\n        <code>{this.props.loadingText}</code>\n        <br />\n        <code style={{ color: \"red\", fontSize: 12 }}>\n          {this.state.error_messages}\n        </code>\n      </div>\n    ) : (\n      \"\"\n    );\n\n    this.errorMessages();\n\n    const Score = () => {\n      if (this.state.score !== 0) this.lastScore = this.state.score;\n\n      return (\n        <div className={styles.scores}>\n          <p className={styles.totalScore}>{this.state.totalScore}</p>\n          <p\n            className={styles.score}\n            style={{\n              opacity: this.state.scoreOpacity\n            }}\n          >\n            {this.lastScore}\n          </p>\n        </div>\n      );\n    };\n\n    return (\n      <div className={styles.posenet}>\n        {this.props.compete && <Score />}\n        {loading}\n\n        <div\n          className={styles.posenetCanvasContainer}\n          style={{ width: this.props.videoWidth, overflow: \"hidden\" }}\n        >\n          <Webcam ref={this.getVideo} />\n          <canvas className={styles.posenetCanvas} ref={this.getCanvas} />\n        </div>\n      </div>\n    );\n  }\n}\n","// posenet code, takes in video feed and returns pose\n// also records video feed\nimport Posenet from \"./Posenet\";\n\nexport default Posenet;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./index.module.css\";\n\nimport Posenet from \"../../components/Posenet\";\n\nconst MAX_WIDTH = 375;\n\nconst Page = ({ onScore, onRestart }) => {\n  const [restarting, setRestarting] = useState(false);\n  const [score, setScore] = useState(0);\n  const [phase, setPhase] = useState(\"\");\n  const [dims, setDims] = useState({ height: 0, width: 0 });\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this page yo\");\n    setDims({\n      height: window.innerHeight,\n      width: Math.min(window.innerWidth, MAX_WIDTH)\n    });\n\n    // show modal, prepare user to start\n    setPhase(\"start\");\n\n    return () => console.log(\"unmounted this page yo\");\n  }, []);\n\n  const handleClick = type => {\n    if (type === \"start\") {\n      setPhase(\"play\");\n      setRestarting(false);\n    } else if (type === \"endless\") {\n      setPhase(\"endless\");\n      setRestarting(false);\n    } else if (type === \"end\") {\n      setPhase(\"submit\");\n      setRestarting(true);\n      if (onScore) {\n        onScore(score);\n      }\n    } else if (type === \"retry\") {\n      setRestarting(true);\n      if (onRestart) {\n        onRestart();\n      }\n    }\n  };\n\n  // handles live recording of pose\n  const onTracePose = p => {};\n\n  const onTraceVideo = v => {\n    //console.log(v)\n  };\n\n  // when one loop ends, trigger this\n  const handleRecordEnd = score => {\n    console.log(\"SCORE IS\");\n    console.log(score);\n    setScore(score);\n    setPhase(\"end\");\n  };\n\n  const Modal = ({ type, onClick, score }) => {\n    if (type === \"start\") {\n      return (\n        <div className={styles.modalStart}>\n          <p>Ready to go?</p>\n          <button onClick={() => onClick(type)}>START!</button>\n          <br />\n          <button onClick={() => onClick(\"endless\")}>ENDLESS MODE!</button>\n        </div>\n      );\n    } else if (type === \"end\") {\n      return (\n        <div className={styles.modalEnd}>\n          <p>your score is {score}</p>\n          <p>do you want to submit?</p>\n          <button onClick={() => onClick(\"retry\")}>RETRY</button>\n          <button onClick={() => onClick(type)}>SUBMIT</button>\n        </div>\n      );\n    } else if (type === \"play\" || type === \"endless\") {\n      return (\n        <Posenet\n          restart={restarting}\n          onEnd={handleRecordEnd}\n          videoWidth={dims.width}\n          videoHeight={dims.height}\n          mobileNetArchitecture={0.5}\n          outputStride={8}\n          loadingText={\"Loading...\"}\n          frontCamera={true}\n          getPoseRecords={onTracePose}\n          getVideoRecords={onTraceVideo}\n          showVideo={true}\n          algorithm={\"single-pose\"}\n          record={true}\n          recordVideo\n          endless={type === \"endless\" ? true : false}\n        />\n      );\n    } else {\n      return null;\n    }\n  };\n\n  return (\n    <div className={styles.page}>\n      <Modal type={phase} onClick={handleClick} score={score} />\n    </div>\n  );\n};\n\nexport default Page;\n","import firebase from \"firebase\";\n\nconst config = {\n  apiKey: process.env.apiKey,\n  authDomain: process.env.authDomain,\n  databaseURL: process.env.databaseURL,\n  projectId: process.env.projectId,\n  storageBucket: process.env.storageBucket,\n  messagingSenderId: process.env.messagingSenderId\n};\n\n// firebase console is under tliqundev@gmail.com\n\nconst reactConfig = {};\nObject.keys(config).map(v => {\n  reactConfig[v] = process.env[`REACT_APP_${v}`];\n});\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(reactConfig);\n}\n\nexport default firebase;\n//module.exports = firebase;\n\nexport const ReadFromFirebase = (databaseRef = \"danceoff\", callback) => {\n  return firebase\n    .database()\n    .ref(databaseRef)\n    .on(\"value\", snapshot => {\n      const vals = snapshot.val();\n      callback(vals);\n    });\n};\n\nexport const ReadSortedFromFirebase = (\n  databaseRef = \"danceoff\",\n  sortKey = \"score\",\n  limit = 50,\n  callback\n) => {\n  return firebase\n    .database()\n    .ref(databaseRef)\n    .orderByChild(sortKey)\n    .limitToLast(limit)\n    .on(\"value\", snapshot => {\n      const sortedVals = [];\n      snapshot.forEach(child => {\n        sortedVals.push(child.val());\n      });\n\n      callback(sortedVals.reverse());\n    });\n};\n\nexport const PushToFirebase = (databaseRef = \"danceoff\", data, callback) => {\n  firebase\n    .database()\n    .ref(databaseRef)\n    .push(data)\n    .then(v => callback(v));\n};\n","import React, { useEffect, useState } from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport { ReadSortedFromFirebase } from \"../../lib/firebase\";\nimport { DB_PATH } from \"../../lib/constants\";\n\nconst Rankings = () => {\n  const [rankings, setRankings] = useState([]);\n\n  useEffect(() => {\n    // mount db listener\n    ReadSortedFromFirebase(DB_PATH, \"score\", 30, setRankings);\n  }, []);\n\n  const ListRankings = () => {\n    const keys = Object.keys(rankings);\n    console.log(\"List nrakings\");\n    console.log(keys);\n\n    if (keys.length === 0) return <p>no data.</p>;\n\n    return (\n      <ol className={styles.rankingOL}>\n        {keys.map((k, i) => (\n          <li className={styles.rankingLI} key={i}>\n            <p>{rankings[k].user}</p>\n            <p>{rankings[k].score}</p>\n          </li>\n        ))}\n      </ol>\n    );\n  };\n\n  return (\n    <>\n      <h1 className={styles.title}>Leaderboard</h1>\n      <div className={styles.rankings}>\n        <ListRankings />\n      </div>\n    </>\n  );\n};\n\nexport default Rankings;\n","export const DEBUG = false;\nexport const COLORS = {\n  main: \"#5FD49B\",\n  secondary: \"#FF8547\",\n  highlight: \"#BAFFFF\"\n};\n\nexport const DB_PATH = \"danceoff/leaderboard\";\n","import React, { useState, useEffect } from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport Button from \"../Button\";\n\nimport { PushToFirebase } from \"../../lib/firebase\";\nimport { DB_PATH } from \"../../lib/constants\";\n\nconst Submit = ({ score }) => {\n  const [username, setUsername] = useState();\n  const handleChange = e => {\n    setUsername(e.target.value);\n  };\n\n  const [userScore, setUserScore] = useState();\n  useEffect(() => {\n    // fix initial user score on mount\n    setUserScore(score);\n  }, []);\n\n  const [posted, setPosted] = useState(false);\n  useEffect(() => {\n    // check if score changed before allowing repost\n    if (score !== userScore) {\n      setPosted(false);\n      setUserScore(score);\n    }\n  }, [score]);\n\n  const handleSubmit = e => {\n    const data = {\n      user: username || \"anonymous\",\n      score: score || 0\n    };\n    // send to firebase\n    PushToFirebase(DB_PATH, data, v => console.log(v));\n    setPosted(true);\n    e.preventDefault();\n  };\n\n  const form = (\n    <div className={styles.formDiv}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <h3>Your score is: {score}</h3>\n        <p className={styles.cta}>Enter Your Name</p>\n        <input\n          className={styles.input}\n          type=\"text\"\n          onChange={handleChange}\n          value={username}\n          placeholder=\"JACK\"\n        />\n        <br />\n        <Button theme=\"default\" type=\"Submit\">\n          Submit\n        </Button>\n      </form>\n    </div>\n  );\n\n  const thanks = (\n    <div className={styles.thankYou}>\n      <h3>Thanks for Playing!</h3>\n      <p>if you want to play again, go back to RECORD and start moving!</p>\n    </div>\n  );\n\n  return posted ? thanks : form;\n};\n\nexport default Submit;\n","import React, { useEffect } from \"react\";\nimport styles from \"./index.module.css\";\n\nimport Rankings from \"../../components/Rankings\";\nimport PostRanking from \"../../components/PostRanking\";\n\nconst Page = ({ score }) => {\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this page yo\");\n\n    return () => console.log(\"unmounted this page yo\");\n  }, []);\n  return (\n    <div className={styles.page}>\n      <Rankings />\n      <PostRanking score={score} />\n    </div>\n  );\n};\n\nexport default Page;\n","import React, { useState } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\n\nimport styles from \"./App.module.css\";\n\n// Navigation\nimport Navigation from \"./components/Navigation\";\n\n// intro\nimport Intro from \"./pages/Intro\";\n// watch\nimport Learn from \"./pages/Learn\";\n// record\nimport Record from \"./pages/Record\";\n// leaderboard\nimport Leaderboard from \"./pages/Leaderboard\";\n\nconst App = () => {\n  const [page, setPage] = useState(\"home\");\n  const [score, setScore] = useState(0);\n\n  const handleScore = score => {\n    setScore(score);\n    setPage(\"compete\");\n  };\n\n  const handleRestart = () => {\n    setPage(\"watch\"); // TODO: a separate ready page\n    setTimeout(() => setPage(\"record\"), 300);\n  };\n\n  const NavRoute = ({ page }) => {\n    switch (page) {\n      case \"home\":\n        return <Intro onClick={() => setPage(\"watch\")} />;\n      case \"watch\":\n        return <Learn />;\n      case \"record\":\n        return <Record onScore={handleScore} onRestart={handleRestart} />;\n      case \"compete\":\n        return <Leaderboard score={score} />;\n      default:\n        return <Intro />;\n    }\n  };\n  return (\n    <div className={styles.app}>\n      <NavRoute page={page} />\n      {page !== \"home\" ? <Navigation onClick={setPage} /> : \"\"}\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nrequire(\"dotenv\").config();\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Intro_page__1L74o Layout_page__3AEwV\",\"hero\":\"Intro_hero__2ooq0\",\"startBtn\":\"Intro_startBtn__3vE0Y\",\"heroTitle\":\"Intro_heroTitle__2Rpj-\",\"heroText\":\"Intro_heroText__370jN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"PostRanking_form__2as46\",\"input\":\"PostRanking_input__1AoXs\",\"formDiv\":\"PostRanking_formDiv__291kB\",\"thankYou\":\"PostRanking_thankYou__3nLOl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Rankings_title__1NMH7\",\"rankings\":\"Rankings_rankings__3XuR5\",\"rankingOL\":\"Rankings_rankingOL__2heD6\",\"rankingLI\":\"Rankings_rankingLI__2qCp_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Record_page__2IDLo Layout_page__3AEwV\",\"modal\":\"Record_modal__MMDii\",\"modalStart\":\"Record_modalStart__3667M Record_modal__MMDii\",\"modalEnd\":\"Record_modalEnd__3PbMl Record_modal__MMDii\"};"],"sourceRoot":""}