{"version":3,"sources":["pages/Intro/index.module.css","pages/Learn/index.module.css","App.module.css","components/Navigation/index.module.css","components/Button/index.module.css","assets/images/danceoff.png","assets/videos/video.mp4","pages/Leaderboard/index.module.css","logo.svg","components/Navigation/Buttons.module.css","components/Posenet/index.module.css","components/Navigation/Buttons.js","components/Navigation/index.js","components/Button/index.js","pages/Intro/index.js","assets/svg/loop.svg","pages/Learn/index.js","components/Posenet/helpers/utils.js","components/Posenet/helpers/cosineSimilarity.js","components/Posenet/helpers/scorer.js","components/Posenet/Posenet.js","components/Posenet/index.js","pages/Record/index.js","lib/firebase.js","components/Rankings/index.js","lib/constants.js","components/PostRanking/index.js","pages/Leaderboard/index.js","App.js","serviceWorker.js","index.js","components/PostRanking/index.module.css","components/Rankings/index.module.css","pages/Record/index.module.css"],"names":["module","exports","page","hero","startBtn","video","videoControls","buttons","seekBar","seekBtn","btn","dummy","playPause","loop","loopIcon","activeLoop","app","nav","bigBtn","default","intro","__webpack_require__","p","modeButtons","toggleButton","toggleButtonRight","btnContainer","toggles","btnLeft","btnRight","hasRecording","hasRecordingMain","hasRecordingSecondary","loading","posenet","download","button","contextualOptions","contextualOptionsDiv","replayDiv","scrubberDiv","scrubberInnerDiv","scores","s","score","totalScore","videoPlayer","posenetCanvasContainer","posenetCanvas","ModeButtons","_ref","_ref$recordings","recordings","_ref$onToggle","onToggle","v","console","log","length","react_default","a","createElement","className","styles","onClick","style","padding","Page","props","useEffect","Buttons_ModeButtons","Buttons","Button","children","_ref$theme","theme","rest","Object","objectWithoutProperties","assign","src","dance","alt","components_Button","_extends","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","loop_ref2","d","loop_SvgLoop","svgRef","id","x","y","viewBox","enableBackground","xmlSpace","width","height","ref","ForwardRef","forwardRef","_useState","useState","_useState2","slicedToArray","setLoop","_useState3","_useState4","play","setPlay","_useState5","_useState6","progress","setProgress","_useState7","_useState8","seekVal","setSeekVal","fraction","played","_useState9","_useState10","loaded","setLoaded","_useState11","_useState12","seek","setSeek","playerRef","useRef","current","seekTo","ReactPlayer_default","url","playing","onProgress","onReady","dist","onChange","e","direction","Direction","HORIZONTAL","value","_ref2","position","borderRadius","top","left","concat","marginTop","marginLeft","bottom","marginBottom","Pause","Play","isMobile","test","navigator","userAgent","drawKeypoints","keypoints","minConfidence","skeletonColor","ctx","scale","undefined","forEach","keypoint","_keypoint$position","beginPath","arc","Math","PI","fillStyle","fill","toTuple","drawSkeleton","color","lineWidth","_ref3","_ref4","ay","ax","_ref5","by","bx","moveTo","lineTo","strokeStyle","stroke","drawSegment","magnitude","vec","squaredTotal","map","num","pow","reduce","b","sqrt","cosineSimilarity","vector1","vector2","vec1","vec2","Error","dotProduct","remap","low1","high1","low2","high2","vectorizePose","pose","arrayOut","resize","cleanup","_calculatePoseDomain","extent","calculatePoseDomain","xMin","xMax","yMin","yMax","len","slice","scoreSimilarity","currentPose","currentTimeFrame","comparisonPoseSet","compareNearestFrames","includeDistance","accuracyInDecimals","c_Pose","scoreFrames","frameNumber","poseSet","count","includeDist","index","split","round","leftHalf","Array","max","rightHalf","closestNIndices","toConsumableArray","sort","distance","abs","findClosestPoses","weightedSimilarity","comparisonPose","comparisonPoseConfidence","comparisonPoseDistance","comparisonPoseIndex","similarity","toFixed","highestScore","reverse","currentFrameScore","filter","normalized","highest","all","GHOST","poseRecords","PoseNetComponent","state","error_messages","stream","trace","frames","ghostIndex","repeat","scoreOpacity","time","Date","now","finalDims","camera","timeout","good_keypoints","previousDelta","lastScore","traceVideo","_this","bind","assertThisInitialized","getCanvas","elem","canvas","getVideo","prevProps","prevState","frontCamera","stopCamera","setupCamera","startCamera","detectPose","clearTimeout","setState","setTimeout","_this2","errorMessages","getPoseRecords","getVideoRecords","poses","record","blob","cam","srcObject","getTracks","t","stop","mediaDevices","getUserMedia","e1","videoWidth","videoHeight","objectFit","Promise","resolve","onloadedmetadata","_this3","getContext","poseDetectionFrame","_this4","_this$props2","algorithm","imageScaleFactor","forceFlipHorizontal","outputStride","minPoseConfidence","maxPoseDetections","minPartConfidence","nmsRadius","showVideo","showPoints","showSkeleton","ghostColor","skeletonLineWidth","maxFPS","compete","net","flipped","poseDetectionFrameInner","asyncToGenerator","regenerator_default","mark","_callee3","currentDelta","delta","millis","g_keypoints","userPose","wrap","_context3","prev","next","requestAnimationFrame","abrupt","t0","estimateSinglePose","sent","push","estimateMultiplePoses","clearRect","save","translate","drawImage","restore","parseInt","floor","onEnd","recordVideo","tracePose","toBlob","objectSpread","_x3","mobileNetArchitecture","e2","_this5","loadingText","fontSize","opacity","overflow","react_webcam_default","playsInline","Component","defaultProps","window","innerWidth","innerHeight","Posenet","onScore","onRestart","restarting","setRestarting","setScore","phase","setPhase","dims","setDims","min","onTracePose","onTraceVideo","handleRecordEnd","type","modalStart","modalEnd","restart","config","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","reactConfig","firebase","apps","initializeApp","Rankings","rankings","setRankings","databaseRef","sortKey","limit","callback","database","orderByChild","limitToLast","on","snapshot","sortedVals","child","val","ReadSortedFromFirebase","Fragment","title","rankingOL","k","rankingLI","user","Submit","username","setUsername","userScore","setUserScore","posted","setPosted","form","formDiv","onSubmit","data","then","PushToFirebase","preventDefault","cta","input","placeholder","thanks","thankYou","components_Rankings","PostRanking","App","setPage","handleScore","handleRestart","Intro","Learn","Record","Leaderboard","Navigation","Boolean","location","hostname","match","require","ReactDOM","render","src_App_0","document","getElementById","serviceWorker","ready","registration","unregister","modal"],"mappings":"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","file":"static/js/main.96445a48.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Intro_page__1L74o Layout_page__3AEwV\",\"hero\":\"Intro_hero__2ooq0\",\"startBtn\":\"Intro_startBtn__3vE0Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Learn_page__3EZKE Layout_page__3AEwV\",\"video\":\"Learn_video__2sdSS\",\"videoControls\":\"Learn_videoControls__2pAe2\",\"buttons\":\"Learn_buttons__2ncbD\",\"seekBar\":\"Learn_seekBar__BU6xs\",\"seekBtn\":\"Learn_seekBtn__1bftA\",\"btn\":\"Learn_btn__2lKpL\",\"dummy\":\"Learn_dummy__2jhKp Learn_btn__2lKpL\",\"playPause\":\"Learn_playPause__L6Q9A Learn_btn__2lKpL\",\"loop\":\"Learn_loop__R7rsF Learn_btn__2lKpL\",\"loopIcon\":\"Learn_loopIcon__1fX86\",\"activeLoop\":\"Learn_activeLoop__SSIod Learn_loopIcon__1fX86\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3VY0g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__wajNd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigBtn\":\"Button_bigBtn__2JwRJ\",\"default\":\"Button_default__18Fup Button_bigBtn__2JwRJ\",\"intro\":\"Button_intro__1kxON Button_bigBtn__2JwRJ\"};","module.exports = __webpack_public_path__ + \"static/media/danceoff.8f298f1e.png\";","module.exports = __webpack_public_path__ + \"static/media/video.34a4fb22.mp4\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Leaderboard_page__22xay Layout_page__3AEwV\"};","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modeButtons\":\"Buttons_modeButtons__2HNnR\",\"toggleButton\":\"Buttons_toggleButton__3kNmh\",\"toggleButtonRight\":\"Buttons_toggleButtonRight__2C7P- Buttons_toggleButton__3kNmh\",\"btnContainer\":\"Buttons_btnContainer__18RFq\",\"toggles\":\"Buttons_toggles__1TOAn\",\"btn\":\"Buttons_btn__33UXZ\",\"btnLeft\":\"Buttons_btnLeft__1oo4l Buttons_btn__33UXZ\",\"btnRight\":\"Buttons_btnRight__3yaS_ Buttons_btn__33UXZ\",\"hasRecording\":\"Buttons_hasRecording__GrAuA\",\"hasRecordingMain\":\"Buttons_hasRecordingMain__-UFBG Buttons_hasRecording__GrAuA\",\"hasRecordingSecondary\":\"Buttons_hasRecordingSecondary__84sWz Buttons_hasRecording__GrAuA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"Posenet_loading__zk9xm\",\"posenet\":\"Posenet_posenet__2HVBw\",\"download\":\"Posenet_download__UlZD3\",\"button\":\"Posenet_button__gtwpS\",\"contextualOptions\":\"Posenet_contextualOptions__2idSY\",\"contextualOptionsDiv\":\"Posenet_contextualOptionsDiv__1Y5Xa\",\"replayDiv\":\"Posenet_replayDiv__3a_WU\",\"scrubberDiv\":\"Posenet_scrubberDiv__2iI79\",\"scrubberInnerDiv\":\"Posenet_scrubberInnerDiv__u-HoF\",\"scores\":\"Posenet_scores__1uGS0\",\"s\":\"Posenet_s__1W1MI\",\"score\":\"Posenet_score__jromn Posenet_s__1W1MI\",\"totalScore\":\"Posenet_totalScore__2K4cr Posenet_s__1W1MI\",\"videoPlayer\":\"Posenet_videoPlayer__3YJUB\",\"posenetCanvasContainer\":\"Posenet_posenetCanvasContainer__1zoyz\",\"posenetCanvas\":\"Posenet_posenetCanvas__17frf\"};","import React, { useEffect } from \"react\";\n\nimport styles from \"./Buttons.module.css\";\n// constants\nimport { COLORS } from \"../../lib/constants\";\n\nconst ModeButtons = ({\n  recordings = [],\n  onToggle = v => console.log(\"toggled! \" + v)\n}) => {\n  const hasRecording = recordings.length === 0;\n  return (\n    <div className={styles.modeButtons}>\n      <div className={styles.btnContainer}>\n        <button\n          className={\n            styles.btnLeft +\n            \" \" +\n            (hasRecording ? styles.hasRecordingSecondary : \"\")\n          }\n          onClick={() => onToggle(\"watch\")}\n          style={{\n            padding: \"8px 15px\"\n          }}\n        >\n          WATCH ▶️\n        </button>\n        <button\n          className={\n            styles.btn + \" \" + (!hasRecording ? styles.hasRecordingMain : \"\")\n          }\n          onClick={() => onToggle(\"record\")}\n          style={{\n            padding: \"8px 15px\"\n          }}\n        >\n          RECORD 📹\n        </button>\n        <button\n          className={\n            styles.btnRight +\n            \" \" +\n            (!hasRecording ? styles.hasRecordingMain : \"\")\n          }\n          onClick={() => onToggle(\"compete\")}\n          style={{\n            padding: \"8px 15px\"\n          }}\n        >\n          COMPETE ⚔️\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst Page = props => {\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this navigation page yo\");\n\n    return () => console.log(\"unmounted this navigation page yo\");\n  }, []);\n  return <ModeButtons {...props} />;\n};\n\nexport default Page;\n","import React from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport Buttons from \"./Buttons\";\n\nconst Page = ({ onClick }) => {\n  return (\n    <div className={styles.nav}>\n      <Buttons onToggle={onClick} />\n    </div>\n  );\n};\n\nexport default Page;\n","import React from \"react\";\n\nimport styles from \"./index.module.css\";\n\nconst Button = ({ children, onClick, theme = \"default\", ...rest }) => {\n  return (\n    <button className={styles[theme]} onClick={onClick} {...rest}>\n      {children || \"button\"}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { useEffect } from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport Button from \"../../components/Button\";\n\n// assets\nimport dance from \"../../assets/images/danceoff.png\";\n\nconst Page = ({ onClick }) => {\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this page yo\");\n\n    return () => console.log(\"unmounted this page yo\");\n  }, []);\n  return (\n    <div className={styles.page}>\n      <img className={styles.hero} src={dance} alt=\"danceoff!\" />\n      <Button theme=\"intro\" onClick={onClick}>\n        START\n      </Button>\n    </div>\n  );\n};\n\nexport default Page;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M256.5,286c76.683,0,142.5-64.228,142.5-142.5C399,64.9,335.1,0,256.5,0S113,64.9,113,143.5   c0,35.099,12.9,66.899,34.2,91.5c3.005-1.994,21.385-18.847,53.399-29.7C183.8,190,173,168.1,173,143.5   c0-45.601,37.899-82.5,83.5-82.5S339,97.899,339,143.5c0,44.65-35.839,82.5-82.5,82.5C181.597,226,113,288.457,113,368.5   c0,78.6,64.9,143.5,143.5,143.5S399,447.1,399,368.5c0-35.101-12.9-66.901-34.2-91.5c-3.005,1.994-21.385,18.845-53.399,29.7   C328.2,322,339,343.9,339,368.5c0,45.599-36.899,83.5-82.5,83.5S173,414.099,173,368.5C173,323.85,209.839,286,256.5,286z\"\n}));\n\nvar SvgLoop = function SvgLoop(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    width: 512,\n    height: 512,\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLoop, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/loop.21dce757.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState, useRef } from \"react\";\nimport ReactPlayer from \"react-player\";\nimport { Direction, Slider, PlayerIcon } from \"react-player-controls\";\n\nimport styles from \"./index.module.css\";\n\nimport { ReactComponent as LoopIcon } from \"../../assets/svg/loop.svg\";\nimport video from \"../../assets/videos/video.mp4\";\n\nconst Page = () => {\n  const [loop, setLoop] = useState(true);\n  const [play, setPlay] = useState(true);\n\n  // update slider progress\n  const [progress, setProgress] = useState();\n  const [seekVal, setSeekVal] = useState(0);\n  useEffect(() => {\n    if (progress) {\n      // there's more stuff\n      const fraction = progress.played;\n      setSeekVal(fraction);\n    }\n  }, [progress]);\n\n  // seek slider\n  const [loaded, setLoaded] = useState(false);\n  const [seek, setSeek] = useState(0);\n  const playerRef = useRef();\n  useEffect(() => {\n    if (loaded && playerRef) {\n      playerRef.current.seekTo(seek);\n      setSeekVal(seek);\n    }\n  }, [seek]);\n  const scrubVideo = e => {\n    setSeek(e);\n  };\n\n  // style slider and slider handle\n  const SliderBar = ({ direction, value, style, className }) => (\n    <div className={className} style={style} />\n  );\n  const SliderHandle = ({ direction, value, style, className }) => (\n    <div\n      className={className}\n      style={Object.assign(\n        {},\n        {\n          position: \"absolute\",\n          width: 16,\n          height: 16,\n          borderRadius: \"100%\"\n        },\n        direction === Direction.HORIZONTAL\n          ? {\n              top: 0,\n              left: `${value * 100}%`,\n              marginTop: -5,\n              marginLeft: -8\n            }\n          : {\n              left: 0,\n              bottom: `${value * 100}%`,\n              marginBottom: -8,\n              marginLeft: -4\n            },\n        style\n      )}\n    />\n  );\n\n  return (\n    <div className={styles.page}>\n      <ReactPlayer\n        ref={playerRef}\n        height=\"100%\"\n        url={video}\n        playing={play}\n        loop={loop}\n        onProgress={setProgress}\n        onReady={() => setLoaded(true)}\n      />\n      <div className={styles.videoControls}>\n        {/* <div className={styles.seekBar}>\n          <button className={styles.seekBtn} />{\" \"}\n        </div> */}\n        <Slider onChange={scrubVideo} direction={Direction.HORIZONTAL}>\n          <SliderBar\n            className={styles.seekBar}\n            value={seekVal}\n            direction={Direction.HORIZONTAL}\n          />\n          <SliderHandle\n            className={styles.seekBtn}\n            value={seekVal}\n            direction={Direction.HORIZONTAL}\n          />\n        </Slider>\n\n        <div className={styles.buttons}>\n          <p className={styles.dummy} />\n          <button className={styles.playPause} onClick={() => setPlay(!play)}>\n            {play ? (\n              <PlayerIcon.Pause height={20} />\n            ) : (\n              <PlayerIcon.Play height={20} />\n            )}\n          </button>\n          <button className={styles.loop} onClick={() => setLoop(!loop)}>\n            <LoopIcon className={loop ? styles.activeLoop : styles.loopIcon} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Page;\n","import * as posenet from \"@tensorflow-models/posenet\";\n\nexport const isAndroid = () => /Android/i.test(navigator.userAgent);\n\nexport const isiOS = () => /iPhone|iPad|iPod/i.test(navigator.userAgent);\n\nexport const isMobile = () => isAndroid() || isiOS();\n\nexport const drawKeypoints = (\n  keypoints,\n  minConfidence,\n  skeletonColor,\n  ctx,\n  scale = 1\n) => {\n  keypoints.forEach(keypoint => {\n    if (keypoint.score >= minConfidence) {\n      const { y, x } = keypoint.position;\n      ctx.beginPath();\n      ctx.arc(x * scale, y * scale, 3, 0, 2 * Math.PI);\n      ctx.fillStyle = skeletonColor;\n      ctx.fill();\n    }\n  });\n};\n\nconst toTuple = ({ y, x }) => [y, x];\n\nconst drawSegment = ([ay, ax], [by, bx], color, lineWidth, scale, ctx) => {\n  ctx.beginPath();\n  ctx.moveTo(ax * scale, ay * scale);\n  ctx.lineTo(bx * scale, by * scale);\n  ctx.lineWidth = lineWidth;\n  ctx.strokeStyle = color;\n  ctx.stroke();\n};\n\nexport const drawSkeleton = (\n  keypoints,\n  minConfidence,\n  color,\n  lineWidth,\n  ctx,\n  scale = 1\n) => {\n  const adjacentKeyPoints = posenet.getAdjacentKeyPoints(\n    keypoints,\n    minConfidence\n  );\n\n  adjacentKeyPoints.forEach(keypoints => {\n    drawSegment(\n      toTuple(keypoints[0].position),\n      toTuple(keypoints[1].position),\n      color,\n      lineWidth,\n      scale,\n      ctx\n    );\n  });\n};\n\n// draw3dModel\n// exact same thing\n","export const magnitude = vec => {\n  const squaredTotal = vec.map(num => Math.pow(num, 2)).reduce((a, b) => a + b); // sum of squares\n  const mag = Math.sqrt(squaredTotal); // squared root\n  return mag;\n};\n\nexport const dotProduct = (vec1, vec2) => {\n  if (vec1.length !== vec2.length) {\n    throw new Error(\n      \"vector lengths are not similar. please make sure vector 1 and vector 2 have the same length.\"\n    );\n  }\n  const sumOfMultiplications = vec1\n    .map((vec, i) => vec * vec2[i]) // multiply each scalar in the vector\n    .reduce((a, b) => a + b); // sum\n  return sumOfMultiplications;\n};\n\nexport const cosineSimilarity = (vector1, vector2) => {\n  const sim =\n    dotProduct(vector1, vector2) / (magnitude(vector1) * magnitude(vector2));\n  return sim;\n};\n","import { extent } from \"d3-array\";\nimport { cosineSimilarity } from \"./cosineSimilarity\";\n\nconst SCORE_MIN = 0.9;\n\nfunction remap(value, low1, high1, low2, high2) {\n  return low2 + ((high2 - low2) * (value - low1)) / (high1 - low1);\n}\n\n// find bounding box of pose\nconst calculatePoseDomain = pose => {\n  const keypoints = pose.keypoints;\n  const x = keypoints.map(v => v.position.x);\n  const y = keypoints.map(v => v.position.y);\n\n  const xDomain = extent(x);\n  const yDomain = extent(y);\n\n  return { x: xDomain, y: yDomain };\n};\n\n// return an array of poses with current pose in the middle of array\n// frameNumber == which point in time (of the poseSet) do you want to compare?\nconst findClosestPoses = (\n  frameNumber,\n  poseSet,\n  count = 5,\n  includeDist = false\n) => {\n  const index = frameNumber;\n  // find n closest poses compared to input pose and its index\n  const split = Math.round(count / 2);\n  // the first item in leftHalf is the current index\n  const leftHalf = Array(split)\n    .fill(split)\n    .map((v, i) => Math.max(index - i, 0));\n\n  const rightHalf = Array(count - split)\n    .fill(count - split)\n    .map((v, i) => index + 1 + i);\n\n  const closestNIndices = [...leftHalf, ...rightHalf].sort((a, b) => a - b);\n\n  if (includeDist) {\n    return closestNIndices.map((v, i) => {\n      return {\n        distance: Math.abs(index - v),\n        index: v,\n        pose: poseSet[v]\n      };\n    });\n  } else {\n    return closestNIndices.map(v => poseSet[v]);\n  }\n};\n\n// convert pose into vector,\n// option to resize to 0-1 for scoring\n// option to ensure vector is length 34 (for tfjs posenet)\nconst vectorizePose = (pose, resize = true, cleanup = true) => {\n  let arrayOut;\n\n  if (!pose || pose.length === 0) return [];\n\n  // maintain pose order\n  const keypoints = pose.keypoints;\n  // const keypoints = pose.keypoints.sort((a, b) => {\n  //   const x = a.part;\n  //   const y = b.part;\n\n  //   if (x < y) return -1;\n  //   if (x > y) return 1;\n  //   return 0;\n  // });\n\n  // resize == remap x and y to 0 to 1\n  if (resize) {\n    const { x, y } = calculatePoseDomain(pose);\n    const xMin = x[0];\n    const xMax = x[1];\n    const yMin = y[0];\n    const yMax = y[1];\n\n    //todo test this\n    arrayOut = [].concat.apply(\n      [],\n      keypoints.map(v => [\n        remap(v.position.y, yMin, yMax, 0, 1),\n        remap(v.position.x, xMin, xMax, 0, 1)\n      ])\n    );\n  } else {\n    arrayOut = [].concat.apply(\n      [],\n      keypoints.map(v => [v.position.y, v.position.x])\n    );\n  }\n\n  // ensure length === 34\n  if (cleanup) {\n    const len = arrayOut.length;\n    if (len !== 34) {\n      if (len < 34) {\n        console.log(`current keypoint count is ${len}. should be 34.`);\n      }\n      arrayOut = arrayOut.slice(0, 34);\n    }\n  }\n\n  return arrayOut;\n};\n\nconst scoreSimilarity = (\n  currentPose,\n  currentTimeFrame,\n  comparisonPoseSet,\n  compareNearestFrames = 5,\n  includeDistance = true,\n  accuracyInDecimals = 4\n) => {\n  const PENALTY = 0.001;\n  const c_Pose = vectorizePose(currentPose, true, true);\n\n  // score nearest n poses with current pose\n  const scoreFrames = findClosestPoses(\n    currentTimeFrame,\n    comparisonPoseSet,\n    compareNearestFrames,\n    includeDistance\n  ).map((v, i) => {\n    if (!v.pose) {\n      return {\n        distance: 1,\n        score: 0,\n        cosineSimilarity: 0,\n        weightedSimilarity: 0,\n        index: v.index\n      };\n    }\n\n    const comparisonPose = vectorizePose(v.pose, true, true);\n    const comparisonPoseConfidence = v.pose.score;\n    const comparisonPoseDistance = v.distance;\n    const comparisonPoseIndex = v.index;\n\n    // cosine similarity\n    const similarity = cosineSimilarity(c_Pose, comparisonPose).toFixed(\n      accuracyInDecimals\n    );\n    // penalize by accuracy/confidence\n    const weightedSimilarity = comparisonPoseConfidence * similarity;\n    // also penalize by how many frame did you lag behind\n    const finalSimilarity =\n      weightedSimilarity - comparisonPoseDistance * PENALTY;\n\n    return {\n      distance: comparisonPoseDistance,\n      score: finalSimilarity,\n      cosineSimilarity: similarity,\n      weightedSimilarity: weightedSimilarity,\n      index: comparisonPoseIndex\n    };\n  });\n\n  const highestScore = scoreFrames\n    .map(v => v.score)\n    .sort((a, b) => a - b)\n    .reverse()[0];\n  const currentFrameScore = scoreFrames.filter(v => v.distance === 0)[0].score;\n\n  return {\n    score: {\n      normalized: Math.max(remap(highestScore, SCORE_MIN, 1.0, 0, 100), 0),\n      highest: highestScore,\n      current: currentFrameScore,\n      all: scoreFrames\n    }\n  };\n};\n\nexport default scoreSimilarity;\n","// ref: https://github.com/jscriptcoder/tfjs-posenet/blob/master/src/PoseNet/index.jsx\n\n// main imports\nimport React, { Component } from \"react\";\nimport * as posenet from \"@tensorflow-models/posenet\";\n\nimport Webcam from \"react-webcam\";\n\n// styles\nimport styles from \"./index.module.css\";\n\n// components\nimport { isMobile, drawKeypoints, drawSkeleton } from \"./helpers/utils\";\nimport scoreSimilarity from \"./helpers/scorer\";\n\n// ghost (the dance move you're competing with)\nimport DANCER from \"./data/ROBOT_RAHMAT.json\";\nconst GHOST = DANCER.poseRecords;\n\nexport default class PoseNetComponent extends Component {\n  static defaultProps = {\n    videoWidth: window.innerWidth,\n    videoHeight: window.innerHeight,\n    algorithm: \"single-pose\",\n    mobileNetArchitecture: isMobile() ? 0.5 : 1.01,\n    showVideo: true,\n    showSkeleton: true,\n    showPoints: true,\n    minPoseConfidence: 0.1,\n    minPartConfidence: 0.1,\n    maxPoseDetections: 2,\n    nmsRadius: 20.0,\n    outputStride: 16,\n    imageScaleFactor: 0.5,\n    skeletonColor: \"aqua\",\n    ghostColor: \"yellow\",\n    skeletonLineWidth: 8,\n    loadingText: \"Loading pose detector...\",\n    frontCamera: true,\n    stop: false,\n    record: false,\n    recordVideo: false,\n    maxFPS: 30,\n    compete: true\n  };\n\n  state = {\n    loading: true,\n    error_messages: \"\",\n    stream: null,\n    trace: [],\n    frames: [],\n    ghostIndex: 0,\n    repeat: false,\n    score: 0,\n    totalScore: 0,\n    scoreOpacity: 0,\n    time: Date.now(),\n    finalDims: { height: 0, width: 0 }\n  };\n  camera = undefined;\n  timeout = undefined;\n  good_keypoints = {};\n  previousDelta = 0;\n  lastScore = 0;\n  traceVideo = this.traceVideo.bind(this);\n\n  async componentDidUpdate(prevProps, prevState) {\n    if (prevProps !== this.props) {\n      if (prevProps.frontCamera !== this.props.frontCamera) {\n        // stop existing camera\n        this.stopCamera();\n        // setup and start\n        this.camera = await this.setupCamera();\n        this.startCamera();\n        // detect pose\n        this.detectPose();\n      }\n    }\n\n    if (prevState !== this.state) {\n      if (prevState.score !== this.state.score && this.state.score !== 0) {\n        if (this.timeout) clearTimeout(this.timeout);\n        this.setState({ scoreOpacity: 1 });\n        this.timeout = setTimeout(\n          () => this.setState({ scoreOpacity: 0 }),\n          3000\n        );\n      }\n    }\n  }\n\n  errorMessages() {\n    // pipe out error messages\n    if (this.props.errorMessages) {\n      this.props.errorMessages(this.state.error_messages);\n    }\n  }\n\n  // the traced sequence\n  getPoseRecords() {\n    if (this.props.getPoseRecords) {\n      this.props.getPoseRecords(this.state.trace);\n    }\n  }\n\n  getVideoRecords() {\n    if (this.props.getVideoRecords) {\n      this.props.getVideoRecords(this.state.frames);\n    }\n  }\n\n  tracePose(poses) {\n    if (this.props.record) {\n      this.setState({ trace: [...this.state.trace, ...poses] });\n    }\n  }\n\n  traceVideo(blob) {\n    if (this.props.record) {\n      this.setState({ frames: [...this.state.frames, blob] });\n    }\n  }\n\n  getCanvas = elem => {\n    this.canvas = elem;\n  };\n\n  getVideo = elem => {\n    try {\n      this.video = elem.video; // react-webcam\n    } catch (e) {\n      this.video = elem; // html5 video tag\n    }\n  };\n\n  stopCamera() {\n    const cam = this.camera;\n    if (cam) {\n      const stream = cam.srcObject;\n      const tracks = stream.getTracks();\n\n      // stop all tracks\n      tracks.map(t => t.stop());\n      this.camera = undefined;\n      this.setState({ loading: true, stop: true });\n    }\n  }\n\n  startCamera() {\n    const cam = this.camera;\n    if (cam) {\n      this.setState({ loading: false, stop: false });\n    } else {\n      this.stopCamera();\n    }\n  }\n\n  async setupCamera() {\n    // MDN: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      const e1 =\n        \"Browser API navigator.mediaDevices.getUserMedia not available\";\n      this.setState({ error_messages: e1 });\n      throw e1;\n    }\n\n    const { videoWidth, videoHeight } = this.props;\n    const video = this.video;\n    const mobile = isMobile();\n    const frontCamera = this.props.frontCamera;\n\n    video.width = videoWidth;\n    video.height = videoHeight;\n    video.style.objectFit = \"contain\";\n\n    // MDN: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    // const stream = await navigator.mediaDevices.getUserMedia({\n    //   audio: false,\n    //   video: {\n    //     facingMode: frontCamera ? \"user\" : { exact: \"environment\" },\n    //     // width: videoWidth,\n    //     // height: videoHeight\n    //     width: mobile ? void 0 : videoWidth,\n    //     height: mobile ? void 0 : videoHeight\n    //   }\n    // });\n\n    // video.srcObject = stream;\n\n    return new Promise(resolve => {\n      video.onloadedmetadata = () => {\n        // Once the video metadata is ready, we can start streaming video\n        video.play();\n\n        const finalDims = {\n          height: video.videoHeight, // actual video running\n          width: video.videoWidth\n        };\n\n        video.width = video.videoWidth;\n        video.height = video.videoHeight;\n\n        this.setState({ finalDims });\n        resolve(video); // promise returns video\n      };\n    });\n  }\n\n  detectPose() {\n    //const { videoWidth, videoHeight } = this.props;\n    const videoWidth = this.state.finalDims.width;\n    const videoHeight = this.state.finalDims.height;\n\n    const canvas = this.canvas;\n    const ctx = canvas.getContext(\"2d\");\n\n    canvas.width = videoWidth;\n    canvas.height = videoHeight;\n\n    this.poseDetectionFrame(ctx);\n  }\n\n  poseDetectionFrame(ctx) {\n    const {\n      algorithm,\n      imageScaleFactor,\n      forceFlipHorizontal,\n      outputStride,\n      minPoseConfidence,\n      maxPoseDetections,\n      minPartConfidence,\n      nmsRadius,\n      //videoWidth,\n      //videoHeight,\n      showVideo,\n      showPoints,\n      showSkeleton,\n      skeletonColor,\n      ghostColor,\n      skeletonLineWidth,\n      frontCamera,\n      stop,\n      maxFPS,\n      compete\n    } = this.props;\n\n    const { finalDims } = this.state;\n\n    const videoHeight = finalDims.height;\n    const videoWidth = finalDims.width;\n\n    const net = this.net;\n    const video = this.video;\n\n    const flipped = forceFlipHorizontal\n      ? forceFlipHorizontal\n      : frontCamera\n      ? true\n      : false;\n\n    const poseDetectionFrameInner = async currentDelta => {\n      // this is to cap fps\n      //requestAnimationFrame(poseDetectionFrameInner);\n      if (!stop) requestAnimationFrame(poseDetectionFrameInner);\n      var delta = currentDelta - this.previousDelta;\n      if (maxFPS && delta < 1000 / maxFPS) {\n        return;\n      }\n\n      let poses = [];\n\n      switch (algorithm) {\n        case \"single-pose\":\n          const pose = await net.estimateSinglePose(\n            video,\n            imageScaleFactor,\n            flipped,\n            outputStride\n          );\n\n          poses.push(pose);\n          break;\n\n        case \"multi-pose\":\n          poses = await net.estimateMultiplePoses(\n            video,\n            imageScaleFactor,\n            flipped,\n            outputStride,\n            maxPoseDetections,\n            minPartConfidence,\n            nmsRadius\n          );\n\n          break;\n      }\n\n      ctx.clearRect(0, 0, videoWidth, videoHeight);\n\n      // SHOW VIDEO FRAME\n      // ----------------\n      if (showVideo) {\n        ctx.save();\n        if (flipped) {\n          // https://christianheilmann.com/2013/07/19/flipping-the-image-when-accessing-the-laptop-camera-with-getusermedia/\n          ctx.scale(-1, 1);\n          ctx.translate(-videoWidth, 0);\n        }\n        ctx.drawImage(video, 0, 0, videoWidth, videoHeight);\n        ctx.restore();\n      }\n\n      // DRAW CURRENT PREDICTION\n      // -----------------------\n      // For each pose (i.e. person) detected in an image, loop through the poses\n      // and draw the resulting skeleton and keypoints if over certain confidence\n      // scores\n      poses.forEach(({ score, keypoints }) => {\n        if (score >= minPoseConfidence) {\n          if (showPoints) {\n            drawKeypoints(keypoints, minPartConfidence, skeletonColor, ctx);\n          }\n          if (showSkeleton) {\n            drawSkeleton(\n              keypoints,\n              minPartConfidence,\n              skeletonColor,\n              skeletonLineWidth,\n              ctx\n            );\n          }\n        }\n      });\n\n      // DRAW GWARA GIRL\n      // ---------------\n      if (compete) {\n        if (!GHOST[this.state.ghostIndex]) {\n          // end of loop\n          console.log(\"RESET!!!!\");\n          const millis = Date.now() - this.state.time;\n          console.log(\"seconds elapsed = \" + Math.floor(millis / 1000));\n\n          // for now, repeat loop\n          if (this.state.repeat) {\n            // ENDLESS MODE FTW\n            this.setState({ ghostIndex: 0 });\n          } else {\n            this.stopCamera();\n            if (this.props.onEnd) {\n              this.props.onEnd(this.state.totalScore);\n            }\n            this.setState({ totalScore: 0, time: Date.now(), stop: true });\n          }\n        } else {\n          const g_keypoints = GHOST[this.state.ghostIndex].keypoints;\n          const g_score = GHOST[this.state.ghostIndex].score;\n\n          if (g_score >= minPoseConfidence) {\n            // only update keypoints when it passes the confidene threshold\n            this.good_keypoints = g_keypoints;\n          }\n          // else use the previous one\n          if (showPoints) {\n            drawKeypoints(\n              this.good_keypoints,\n              minPartConfidence,\n              ghostColor,\n              ctx\n            );\n          }\n          if (showSkeleton) {\n            drawSkeleton(\n              this.good_keypoints,\n              minPartConfidence,\n              ghostColor,\n              skeletonLineWidth,\n              ctx\n            );\n          }\n\n          // SCORE USER AGAINST GHOST\n          const userPose = poses[0];\n          const similarity = scoreSimilarity(\n            userPose,\n            this.state.ghostIndex, // TODO: change this\n            GHOST\n          );\n\n          console.log(similarity.score.highest);\n\n          const score = parseInt(similarity.score.normalized.toFixed(2));\n          this.setState(prev => ({\n            score: score,\n            totalScore: prev.totalScore + score\n          }));\n        }\n      }\n\n      // SHOW OUTPUT\n      // -----------\n      if (stop || this.state.stop || !this.camera) {\n        console.log(\"stopping function\");\n        console.log(\"TODO: FIX MEMORY LEAK\");\n        // clear canvas\n        ctx.clearRect(0, 0, videoWidth, videoHeight);\n      } else {\n        // console.log(poses);\n\n        if (this.props.record) {\n          if (this.props.recordVideo) {\n            //console.log(\"recording frame and video!\");\n          } else {\n            //console.log(\"recording frames!\");\n          }\n          // trace\n          this.tracePose(poses);\n          // record video\n          this.canvas.toBlob(this.traceVideo, \"image/jpeg\", 0.4);\n\n          // stream poses to parent\n          this.getPoseRecords();\n          this.getVideoRecords();\n        }\n\n        // call next recursion\n        this.setState(prevState => ({\n          ...prevState,\n          ghostIndex: prevState.ghostIndex + 1\n        }));\n\n        this.previousDelta = currentDelta;\n      }\n    };\n\n    poseDetectionFrameInner();\n  }\n\n  async componentDidMount() {\n    this.net = await posenet.load(this.props.mobileNetArchitecture);\n    //console.log(\"loaded mobilenet\");\n    //console.log(this.net);\n\n    try {\n      this.camera = await this.setupCamera();\n    } catch (e) {\n      const e2 =\n        \"This browser does not support video capture, or this device does not have a camera\";\n      this.setState({ error_messages: e2 });\n      throw e2;\n    } finally {\n      this.setState({ loading: false });\n    }\n\n    this.detectPose();\n  }\n\n  componentWillUnmount() {\n    console.log(\"component will unmounts!\");\n    this.stopCamera();\n    this.setState({ stop: true });\n  }\n\n  render() {\n    const loading = this.state.loading ? (\n      <div className={styles.loading}>\n        <code>{this.props.loadingText}</code>\n        <br />\n        <code style={{ color: \"red\", fontSize: 12 }}>\n          {this.state.error_messages}\n        </code>\n      </div>\n    ) : (\n      \"\"\n    );\n\n    this.errorMessages();\n\n    const Score = () => {\n      if (this.state.score !== 0) this.lastScore = this.state.score;\n\n      return (\n        <div className={styles.scores}>\n          <p className={styles.totalScore}>{this.state.totalScore}</p>\n          <p\n            className={styles.score}\n            style={{\n              opacity: this.state.scoreOpacity\n            }}\n          >\n            {this.lastScore}\n          </p>\n        </div>\n      );\n    };\n\n    return (\n      <div className={styles.posenet}>\n        {this.props.compete && <Score />}\n        {loading}\n\n        <div\n          className={styles.posenetCanvasContainer}\n          style={{ width: this.props.videoWidth, overflow: \"hidden\" }}\n        >\n          <Webcam ref={this.getVideo} playsInline />\n          <canvas className={styles.posenetCanvas} ref={this.getCanvas} />\n        </div>\n      </div>\n    );\n  }\n}\n","// posenet code, takes in video feed and returns pose\n// also records video feed\nimport Posenet from \"./Posenet\";\n\nexport default Posenet;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./index.module.css\";\n\nimport Posenet from \"../../components/Posenet\";\n\nconst MAX_WIDTH = 375;\n\nconst Page = ({ onScore, onRestart }) => {\n  const [restarting, setRestarting] = useState(false);\n  const [score, setScore] = useState(0);\n  const [phase, setPhase] = useState(\"\");\n  const [dims, setDims] = useState({ height: 0, width: 0 });\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this page yo\");\n    setDims({\n      height: window.innerHeight,\n      width: Math.min(window.innerWidth, MAX_WIDTH)\n    });\n\n    // show modal, prepare user to start\n    setPhase(\"start\");\n\n    return () => console.log(\"unmounted this page yo\");\n  }, []);\n\n  const handleClick = type => {\n    if (type === \"start\") {\n      setPhase(\"play\");\n      setRestarting(false);\n    } else if (type === \"end\") {\n      setPhase(\"submit\");\n      setRestarting(true);\n      if (onScore) {\n        onScore(score);\n      }\n    } else if (type === \"retry\") {\n      setRestarting(true);\n      if (onRestart) {\n        onRestart();\n      }\n    }\n  };\n\n  // handles live recording of pose\n  const onTracePose = p => {};\n\n  const onTraceVideo = v => {\n    //console.log(v)\n  };\n\n  // when one loop ends, trigger this\n  const handleRecordEnd = score => {\n    console.log(\"SCORE IS\");\n    console.log(score);\n    setScore(score);\n    setPhase(\"end\");\n  };\n\n  const Modal = ({ type, onClick, score }) => {\n    if (type === \"start\") {\n      return (\n        <div className={styles.modalStart}>\n          <p>Ready to go?</p>\n          <button onClick={() => onClick(type)}>START!</button>\n        </div>\n      );\n    } else if (type === \"end\") {\n      return (\n        <div className={styles.modalEnd}>\n          <p>your score is {score}</p>\n          <p>do you want to submit?</p>\n          <button onClick={() => onClick(\"retry\")}>RETRY</button>\n          <button onClick={() => onClick(type)}>SUBMIT</button>\n        </div>\n      );\n    } else if (type === \"play\") {\n      return (\n        <Posenet\n          restart={restarting}\n          onEnd={handleRecordEnd}\n          videoWidth={dims.width}\n          videoHeight={dims.height}\n          mobileNetArchitecture={0.5}\n          outputStride={8}\n          loadingText={\"Loading...\"}\n          frontCamera={true}\n          getPoseRecords={onTracePose}\n          getVideoRecords={onTraceVideo}\n          showVideo={true}\n          algorithm={\"single-pose\"}\n          record={true}\n          recordVideo\n        />\n      );\n    } else {\n      return null;\n    }\n  };\n\n  return (\n    <div className={styles.page}>\n      <Modal type={phase} onClick={handleClick} score={score} />\n    </div>\n  );\n};\n\nexport default Page;\n","import firebase from \"firebase\";\n\nconst config = {\n  apiKey: process.env.apiKey,\n  authDomain: process.env.authDomain,\n  databaseURL: process.env.databaseURL,\n  projectId: process.env.projectId,\n  storageBucket: process.env.storageBucket,\n  messagingSenderId: process.env.messagingSenderId\n};\n\nconst reactConfig = {};\nObject.keys(config).map(v => {\n  reactConfig[v] = process.env[`REACT_APP_${v}`];\n});\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(reactConfig);\n}\n\nexport default firebase;\n//module.exports = firebase;\n\nexport const ReadFromFirebase = (databaseRef = \"danceoff\", callback) => {\n  return firebase\n    .database()\n    .ref(databaseRef)\n    .on(\"value\", snapshot => {\n      const vals = snapshot.val();\n      callback(vals);\n    });\n};\n\nexport const ReadSortedFromFirebase = (\n  databaseRef = \"danceoff\",\n  sortKey = \"score\",\n  limit = 50,\n  callback\n) => {\n  return firebase\n    .database()\n    .ref(databaseRef)\n    .orderByChild(sortKey)\n    .limitToLast(limit)\n    .on(\"value\", snapshot => {\n      const sortedVals = [];\n      snapshot.forEach(child => {\n        sortedVals.push(child.val());\n      });\n\n      callback(sortedVals.reverse());\n    });\n};\n\nexport const PushToFirebase = (databaseRef = \"danceoff\", data, callback) => {\n  firebase\n    .database()\n    .ref(databaseRef)\n    .push(data)\n    .then(v => callback(v));\n};\n","import React, { useEffect, useState } from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport { ReadSortedFromFirebase } from \"../../lib/firebase\";\nimport { DB_PATH } from \"../../lib/constants\";\n\nconst Rankings = () => {\n  const [rankings, setRankings] = useState([]);\n\n  useEffect(() => {\n    // mount db listener\n    ReadSortedFromFirebase(DB_PATH, \"score\", 30, setRankings);\n  }, []);\n\n  const ListRankings = () => {\n    const keys = Object.keys(rankings);\n    console.log(\"List nrakings\");\n    console.log(keys);\n\n    if (keys.length === 0) return <p>no data.</p>;\n\n    return (\n      <ol className={styles.rankingOL}>\n        {keys.map((k, i) => (\n          <li className={styles.rankingLI} key={i}>\n            <p>{rankings[k].user}</p>\n            <p>{rankings[k].score}</p>\n          </li>\n        ))}\n      </ol>\n    );\n  };\n\n  return (\n    <>\n      <h1 className={styles.title}>Leaderboard</h1>\n      <div className={styles.rankings}>\n        <ListRankings />\n      </div>\n    </>\n  );\n};\n\nexport default Rankings;\n","export const DEBUG = false;\nexport const COLORS = {\n  main: \"#5FD49B\",\n  secondary: \"#FF8547\",\n  highlight: \"#BAFFFF\"\n};\n\nexport const DB_PATH = \"danceoff/leaderboard\";\n","import React, { useState, useEffect } from \"react\";\n\nimport styles from \"./index.module.css\";\n\nimport Button from \"../Button\";\n\nimport { PushToFirebase } from \"../../lib/firebase\";\nimport { DB_PATH } from \"../../lib/constants\";\n\nconst Submit = ({ score }) => {\n  const [username, setUsername] = useState();\n  const handleChange = e => {\n    setUsername(e.target.value);\n  };\n\n  const [userScore, setUserScore] = useState();\n  useEffect(() => {\n    // fix initial user score on mount\n    setUserScore(score);\n  }, []);\n\n  const [posted, setPosted] = useState(false);\n  useEffect(() => {\n    // check if score changed before allowing repost\n    if (score !== userScore) {\n      setPosted(false);\n      setUserScore(score);\n    }\n  }, [score]);\n\n  const handleSubmit = e => {\n    const data = {\n      user: username || \"anonymous\",\n      score: score || 0\n    };\n    // send to firebase\n    PushToFirebase(DB_PATH, data, v => console.log(v));\n    setPosted(true);\n    e.preventDefault();\n  };\n\n  const form = (\n    <div className={styles.formDiv}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <h3>Your score is: {score}</h3>\n        <p className={styles.cta}>Enter Your Name</p>\n        <input\n          className={styles.input}\n          type=\"text\"\n          onChange={handleChange}\n          value={username}\n          placeholder=\"JACK\"\n        />\n        <br />\n        <Button theme=\"default\" type=\"Submit\">\n          Submit\n        </Button>\n      </form>\n    </div>\n  );\n\n  const thanks = (\n    <div className={styles.thankYou}>\n      <h3>Thanks for Playing!</h3>\n      <p>if you want to play again, go back to RECORD and start moving!</p>\n    </div>\n  );\n\n  return posted ? thanks : form;\n};\n\nexport default Submit;\n","import React, { useEffect } from \"react\";\nimport styles from \"./index.module.css\";\n\nimport Rankings from \"../../components/Rankings\";\nimport PostRanking from \"../../components/PostRanking\";\n\nconst Page = ({ score }) => {\n  useEffect(() => {\n    // didmount\n    console.log(\"mounted this page yo\");\n\n    return () => console.log(\"unmounted this page yo\");\n  }, []);\n  return (\n    <div className={styles.page}>\n      <Rankings />\n      <PostRanking score={score} />\n    </div>\n  );\n};\n\nexport default Page;\n","import React, { useState } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\n\nimport styles from \"./App.module.css\";\n\n// Navigation\nimport Navigation from \"./components/Navigation\";\n\n// intro\nimport Intro from \"./pages/Intro\";\n// watch\nimport Learn from \"./pages/Learn\";\n// record\nimport Record from \"./pages/Record\";\n// leaderboard\nimport Leaderboard from \"./pages/Leaderboard\";\n\nconst App = () => {\n  const [page, setPage] = useState(\"record\");\n  const [score, setScore] = useState(0);\n\n  const handleScore = score => {\n    setScore(score);\n    setPage(\"compete\");\n  };\n\n  const handleRestart = () => {\n    setPage(\"watch\"); // TODO: a separate ready page\n    setTimeout(() => setPage(\"record\"), 300);\n  };\n\n  const NavRoute = ({ page }) => {\n    switch (page) {\n      case \"home\":\n        return <Intro onClick={() => setPage(\"watch\")} />;\n      case \"watch\":\n        return <Learn />;\n      case \"record\":\n        return <Record onScore={handleScore} onRestart={handleRestart} />;\n      case \"compete\":\n        return <Leaderboard score={score} />;\n      default:\n        return <Intro />;\n    }\n  };\n  return (\n    <div className={styles.app}>\n      <NavRoute page={page} />\n      {page !== \"home\" ? <Navigation onClick={setPage} /> : \"\"}\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nrequire(\"dotenv\").config();\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"PostRanking_form__2as46\",\"input\":\"PostRanking_input__1AoXs\",\"formDiv\":\"PostRanking_formDiv__291kB\",\"thankYou\":\"PostRanking_thankYou__3nLOl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Rankings_title__1NMH7\",\"rankings\":\"Rankings_rankings__3XuR5\",\"rankingOL\":\"Rankings_rankingOL__2heD6\",\"rankingLI\":\"Rankings_rankingLI__2qCp_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Record_page__2IDLo Layout_page__3AEwV\",\"modal\":\"Record_modal__MMDii\",\"modalStart\":\"Record_modalStart__3667M Record_modal__MMDii\",\"modalEnd\":\"Record_modalEnd__3PbMl Record_modal__MMDii\"};"],"sourceRoot":""}